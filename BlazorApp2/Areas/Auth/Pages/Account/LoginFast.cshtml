@page
@using Microsoft.AspNetCore.Identity
@using BlazorApp2.Models
@inject SignInManager<User> _signInManager
@model BlazorApp2.Pages.LoginModel
@{
    ViewData["Title"] = "Log in";
}
<h2>Login</h2>

@functions {
    public async Task<IActionResult> OnGetAsync(string paramUsername, string paramPassword)
    {
        string returnUrl = Url.Content("~/");
        try
        {
            // Clear the existing external cookie
            await _signInManager.SignOutAsync();
        }
        catch { }
        var user3 = await _signInManager.UserManager.FindByEmailAsync(paramUsername);
        await _signInManager.PasswordSignInAsync(user3, paramPassword, true, true);
        return LocalRedirect(returnUrl);
    }
}